# Define WAVES_SRC when you want your app to use something
# other than the installed gem of Waves. Examples of common
# cases helpfully provided below
#
<% if IN_WAVES_SRC -%>
# The framework source used to generate this app
<%= "# WAVES_SRC = '#{WAVES_SRC}'" %>
#
<% end -%>
# Framework source lives in the same directory as this application
# WAVES_SRC = File.join(File.dirname(__FILE__), '..', '..', 'waves')

# Waves source frozen at my_app/waves will always be used
FROZEN_WAVES = File.join(File.dirname(__FILE__), '..', 'waves')

if USE_FROZEN_WAVES = File.exist?(File.join(FROZEN_WAVES, "lib"))
  $:.unshift(File.join(FROZEN_WAVES, "lib"))
elsif USE_WAVES_SRC = defined?(WAVES_SRC)
  $:.unshift(File.join(WAVES_SRC, "lib"))
end

begin
  require 'waves'
rescue LoadError => e
  raise e, "Can't find waves. Install the gem, freeze the source, or define WAVES_SRC in lib/framework.rb"
end